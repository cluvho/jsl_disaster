<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">
<head>
<meta charset="UTF-8">
<title>ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ¼</title> 

<style>
.pagination {
	list-style: none;
	padding-left: 0;
	margin: 0;
}

.header-actions {
	display: flex;
	justify-content: space-between;
	align-items: center;
	gap: 20px;
	margin-top: 10px;
}

.search-bar {
	display: flex;
	align-items: center;
	gap: 8px;
}

.search-bar input, .search-bar select {
	padding: 6px 10px;
	border: 1px solid #ccc;
	border-radius: 6px;
}

/* âœ…âœ…âœ… ê²€ìƒ‰ì–´ ì…ë ¥ì°½ì˜ ë„ˆë¹„ë¥¼ ëŠ˜ë¦¬ëŠ” ìŠ¤íƒ€ì¼ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. âœ…âœ…âœ… */
.search-bar input.form-control {
    flex-grow: 1;      /* ì…ë ¥ì°½ì´ ë‚¨ì€ ê³µê°„ì„ ëª¨ë‘ ì°¨ì§€í•˜ë„ë¡ ì„¤ì • */
    min-width: 100px;  /* ìµœì†Œ ë„ˆë¹„ë¥¼ ì§€ì •í•˜ì—¬ ë„ˆë¬´ ì¢ì•„ì§€ì§€ ì•Šê²Œ í•¨ */
}

/* ê²€ìƒ‰ ë²„íŠ¼ì´ ì°Œê·¸ëŸ¬ì§€ì§€ ì•Šë„ë¡ ìŠ¤íƒ€ì¼ì„ ì¶”ê°€ */
.search-bar button {
    flex-shrink: 0;      /* ë²„íŠ¼ ë„ˆë¹„ê°€ ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ ì„¤ì • */
    white-space: nowrap; /* ë²„íŠ¼ ì•ˆì˜ í…ìŠ¤íŠ¸ê°€ ì¤„ë°”ê¿ˆë˜ì§€ ì•Šë„ë¡ ì„¤ì • */
}

.write-btn {
	display: inline-block;
	padding: 8px 14px; /* ë²„íŠ¼ í¬ê¸° í†µì¼ì„ ìœ„í•´ padding ì¡°ì • */
	background-color: #007bff;
	color: white;
	text-decoration: none;
	border-radius: 6px;
	transition: background-color 0.2s;
	border: none; /* button íƒœê·¸ì˜ ê¸°ë³¸ í…Œë‘ë¦¬ ì œê±° */
    cursor: pointer; /* button íƒœê·¸ì— ë§ˆìš°ìŠ¤ í¬ì¸í„° ì ìš© */
    font-size: 1rem; /* í°íŠ¸ í¬ê¸° ì¼ê´€ì„± ìœ ì§€ */
    line-height: 1.5; /* ë¼ì¸ ë†’ì´ ì¼ê´€ì„± ìœ ì§€ */
    text-align: center; /* í…ìŠ¤íŠ¸ ì¤‘ì•™ ì •ë ¬ */
    white-space: nowrap; /* í…ìŠ¤íŠ¸ ì¤„ë°”ê¿ˆ ë°©ì§€ */
}


.write-btn:hover {
	background-color: #0056b3;
}


.post-card {
	display: block;
	padding: 15px;
	margin-bottom: 12px;
	border: 1px solid #ddd;
	border-radius: 8px;
	text-decoration: none;
	color: inherit;
	transition: box-shadow 0.2s;
}

.post-card:hover {
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.post-meta {
	font-size: 0.9rem;
	color: #555;
	margin-bottom: 6px;
}

.post-title {
	font-size: 1.1rem;
	font-weight: 600;
	margin-bottom: 6px;
}

.post-summary {
	font-size: 0.95rem;
	color: #333;
}

.post-summary img {
	display: none;
}

.text-center {
	margin-top: 20px;
}

.post-thumb {
	width: 80px;
	height: 80px;
	object-fit: cover;
	border-radius: 6px;
	border: 2px solid #ddd;
	margin-right: 12px;
}
</style>
</head>
<body>
	<div layout:fragment="content">
		<div class="page-community container mt-4">

			<div class="community-header mb-3">
				<h2 class="community-title" data-ko="ì»¤ë®¤ë‹ˆí‹°">ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ¼</h2>

				<div class="header-actions">
					<!-- âœ…âœ…âœ… ê²€ìƒ‰ì°½ì— select ë“œë¡­ë‹¤ìš´ì„ ì¶”ê°€ âœ…âœ…âœ… -->
					<form th:action="@{/community/main}" method="get"
						class="search-bar">
						<select name="searchType" class="form-control"
							style="width: 120px;">
							<option value="all" th:selected="${searchType == 'all'}" data-ko="ì „ì²´">å…¨ä½“</option>
							<option value="title" th:selected="${searchType == 'title'}" data-ko="ì œëª©/ë‚´ìš©">ã‚¿ã‚¤ãƒˆãƒ«ãƒ»å†…å®¹</option>
							<option value="nickname"
								th:selected="${searchType == 'nickname'}" data-ko="ì‘ì„±ì">ä½œæˆè€…</option>
							<option value="disasterType"
								th:selected="${searchType == 'disasterType'}" data-ko="ì¬í•´ì¢…ë¥˜">ç½å®³ã‚¿ã‚¤ãƒ—</option>
						</select>
						<input type="text" name="keyword" class="form-control"
							placeholder="æ¤œç´¢èªå…¥åŠ›" th:value="${keyword}" data-ko="ê²€ìƒ‰ì–´ ì…ë ¥">
							
						<div class="region-search">		
							<button onclick="searchRegion()">ğŸ” <span data-translate="search_btn" data-ko="ê²€ìƒ‰">æ¤œç´¢</span></button>
						</div>
					
					</form>

					<div>
						<a th:href="@{/community/communityWrite}" class="write-btn" data-ko="ê¸€ì‘ì„±">ä½œæˆ</a>
					</div>
							
				</div>
			</div>

			<div class="post-list">
				<div th:each="post : ${postList}">
					
						<a th:href="@{/community/{postId}(postId=${post.postId})}" class="post-card d-flex">

						<div class="post-content ms-3">
							<div class="post-meta">
								<span
									th:text="${post.disasterType != null ? post.disasterType.displayName : 'ê¸°íƒ€'}">ì¬ë‚œ
									ìœ í˜•</span> <span>|</span> <span th:text="'ä½œæˆè€… : ' + ${post.nickname}" data-ko="ì‘ì„±ì">ì‘ì„±ì</span>
								<span>|</span> <span th:text="'ç…§ä¼šæ•° : ' + ${post.viewCount}" data-ko="ì¡°íšŒìˆ˜">ì¡°íšŒìˆ˜</span>
								<span>|</span> <span
									th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm')}">ì‘ì„±ì¼</span>
							</div>

							<h4 class="post-title" th:text="${post.title}">ì œëª©</h4>
							<p class="post-summary" th:text="${post.summary}">ë‚´ìš©</p>

						</div>
					</a>
				</div>
			</div>


			<div class="text-center">
				<nav aria-label="Page navigation" th:if="${totalPages > 0}">
					<ul class="pagination">
						<!--  í˜ì´ì§€ë„¤ì´ì…˜ ë§í¬ì— ê²€ìƒ‰ ì¡°ê±´ì„ ì¶”ê°€í•˜ì—¬ ìœ ì§€ë˜ë„ë¡ ìˆ˜ì • -->
						<li class="page-item"
							th:classappend="${currentPage == 1} ? 'disabled'"><a
							class="page-link"
							th:href="@{/community/main(page=${currentPage - 1}, searchType=${searchType}, keyword=${keyword})}"
							aria-label="Previous"> <span aria-hidden="true">&laquo;</span>
						</a></li>

						<li class="page-item"
							th:each="pageNumber : ${#numbers.sequence(1, totalPages)}"
							th:classappend="${pageNumber == currentPage} ? 'active'"><a
							class="page-link"
							th:href="@{/community/main(page=${pageNumber}, searchType=${searchType}, keyword=${keyword})}"
							th:text="${pageNumber}"></a></li>

						<li class="page-item"
							th:classappend="${currentPage == totalPages} ? 'disabled'">
							<a class="page-link"
							th:href="@{/community/main(page=${currentPage + 1}, searchType=${searchType}, keyword=${keyword})}"
							aria-label="Next"> <span aria-hidden="true">&raquo;</span>
						</a>
						</li>		
					</ul>
				</nav>
			</div>

		</div>
	</div>
</body>
</html>

