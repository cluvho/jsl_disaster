<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">

<div layout:fragment="content">
	<div class="page-wrapper">
		<div class="main-content">
			<aside class="sidebar">
				<h2 class="sidebar-title">γ‚«γƒ†γ‚΄γƒγƒΌ</h2>
				<div class="filter-group">
					<label><input type="checkbox" id="weatherToggle"> ε¤©ζ°—ζƒ…ε ±</label> <label><input
						type="checkbox" id="disasterToggle"> η½ε®³ζƒ…ε ±</label> <label><input
						type="checkbox" id="shelterToggle"> ιΏι›£ζ‰€ζƒ…ε ±</label> <label><input
						type="checkbox" id="hospitalToggle"> η—…ι™Άζƒ…ε ±</label>
				</div>
			</aside>

			<main class="content-area">
				<!-- μ§€λ„ μμ—­ -->
				<section class="map-section">
					<div id="map" class="map-canvas"></div>
				</section>

				<h2 class="section-title">ν„μ¬ μ§€μ—­ μƒμ„Έ μ •λ³΄</h2>

				<div class="link-card-list">
					<a href="#">
						<div class="card-icon">π—ΊοΈ</div>
						<div class="card-content">
							<h4>μ£Όλ³€ λ€ν”Όμ† λ©λ΅</h4>
							<p>ν„μ¬ μ„μΉμ—μ„ κ°€μ¥ κ°€κΉμ΄ λ€ν”Όμ†λ¥Ό ν™•μΈν•κ³  κ²½λ΅λ¥Ό μ•λ‚΄ν•©λ‹λ‹¤.</p>
						</div>
						<div class="card-arrow">&gt;</div>
					</a> 
					<a href="#">
						<div class="card-icon">π“°</div>
						<div class="card-content">
							<h4>μµμ‹  μ¬λ‚ λ‰΄μ¤</h4>
							<p>ν„μ¬ μ§€μ—­κ³Ό κ΄€λ ¨λ μµμ‹  μ¬λ‚ μ†λ³΄ λ° μ•μ „ λ¬Έμλ¥Ό ν™•μΈν•©λ‹λ‹¤.</p>
						</div>
						<div class="card-arrow">&gt;</div>
					</a> 
					<a th:href="@{/guidelines/guide}">
						<div class="card-icon">π’</div>
						<div class="card-content">
							<h4>μƒν™©λ³„ ν–‰λ™ μ”λ Ή</h4>
							<p>μ§€μ§„, νƒν’, ν™”μ¬ λ“± ν„μ¬ μƒν™©μ— λ§λ” ν–‰λ™ μ”λ Ήμ„ μ•λ‚΄ν•©λ‹λ‹¤.</p>
						</div>
						<div class="card-arrow">&gt;</div>
					</a>
				</div>
				
			</main>
		</div>
	</div>
</div>

<th:block layout:fragment="script">
	<script>
		function goDetail() {
		  fetch("/api/me/location")
		    .then(res => res.json())
		    .then(data => {
		      window.location.href = `/detail?lat=${data.lat}&lon=${data.lon}`;
		    })
		    .catch(err => {
		      console.error("μ„μΉ κ°€μ Έμ¤κΈ° μ‹¤ν¨:", err);
		      window.location.href = "/detail?lat=35.681236&lon=139.767125"; // λ„μΏ„
		    });
		}
	</script>
	<script src="/js/cities.js"></script>
	<script src="/js/index/weather.js"></script>
	<script src="/js/index/disaster.js"></script>
	<script
	  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBdiJWNOl98gTR6XjCfDhubMwXQZVO3ejs&libraries=geometry&v=weekly&callback=initMap&loading=async "
	  async defer>
	</script>
	<script src="/js/index/myLocation.js"></script>
	<script src="/js/index/shelters.js"></script> <!-- λ‚΄ μ£Όλ³€ λ€ν”Όμ† 30κ° ν‘μ‹ -->
	<!-- <script src="/js/index/allShelters.js"></script> --> <!-- λ¨λ“  λ€ν”Όμ† ν‘μ‹ -->
	<script src="/js/index/hospitals.js"></script>
	<script src="/js/index/toggle.js"></script>
</th:block>
</html>
