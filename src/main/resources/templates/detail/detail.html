<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">
<div layout:fragment="content">
    <div class="page-detail">
        <div class="main-content">
            <main class="content-area">
                <div class="region-header">
                    <div class="region-header-top">
                        <h1>🏙️ <span id="regionName" data-translate="region_daejeon" data-ko="대전광역시">大田広域市</span></h1>
                        <div class="region-search">
                            <input type="text" id="regionSearchInput" data-translate-placeholder="search_placeholder" placeholder="地域名を入力してください" data-ko-placeholder="지역명을 입력하세요" />
                            <button onclick="searchRegion()">🔍 <span data-translate="search_btn" data-ko="검색">検索</span></button>
                        </div>
                    </div>
                    <p data-translate="header_description" data-ko="실시간으로 재해 안전 정보와 대응 상황을 확인하세요.">リアルタイムで災害安全情報と対応状況を確認してください。</p>
                </div>

                <div class="navigation-bar">
                    <div class="nav-menu">
                        <a href="#weather-section" class="nav-item" onclick="scrollToSection('weather-section', this)">
                            🌤️ <span data-translate="nav_weather" data-ko="날씨 예보">天気予報</span>
                        </a>
                        <a href="#disaster-section" class="nav-item" onclick="scrollToSection('disaster-section', this)">
                            🚨 <span data-translate="nav_disaster" data-ko="재해 정보">災害情報</span>
                        </a>
                        <a href="#facility-section" class="nav-item" onclick="scrollToSection('facility-section', this)">
                            🏥 <span data-translate="nav_facility" data-ko="시설 정보">施設情報</span>
                        </a>
                        <a href="#history-section" class="nav-item" onclick="scrollToSection('history-section', this)">
                            📊 <span data-translate="nav_history" data-ko="재해 이력">災害履歴</span>
                        </a>
                        <a href="#news-section" class="nav-item" onclick="scrollToSection('news-section', this)">
                            📰 <span data-translate="nav_news" data-ko="관련 뉴스">関連ニュース</span>
                        </a>
                    </div>
                </div>

                <div id="weather-section" class="section">
                    <h2 class="section-title">🌤️ <span data-translate="weather_title" data-ko="날씨 예보">天気予報</span></h2>
                    
                    <div class="weather-overview">
                        <div class="weather-card">
                            <div class="icon">☀️</div>
                            <div class="temp" id="currentTemp" data-ko="로딩 중..">ローディング中。。</div>
                            <div class="desc" id="currentWeather" data-translate="weather_sunny" data-ko="맑음">晴れ</div>
                        </div>
                    </div>

                    <div class="weather-details">
                        <div class="weather-detail-item">
                            <div class="label" data-translate="wind_speed" data-ko="바람">風速</div>
                            <div class="value">...</div>
                        </div>
                        <div class="weather-detail-item">
                            <div class="label" data-translate="humidity" data-ko="습도">湿度</div>
                            <div class="value">...</div>
                        </div>
                        <div class="weather-detail-item">
                            <div class="label" data-translate="uv_index" data-ko="자외선">紫外線</div>
                            <div class="value">...</div>
                        </div>
                    </div>

                    <div class="forecast-tabs">
                        <div class="forecast-tab active" onclick="showForecast('hourly', this)">
                            <span data-translate="hourly_forecast" data-ko="오늘">本日</span>
                        </div>
                        <div class="forecast-tab" onclick="showForecast('daily', this)">
                            <span data-translate="daily_forecast" data-ko="주간">週間</span>
                        </div>
                        <div class="forecast-tab" onclick="showForecast('warning', this)">
                            <span data-translate="weather_warning" data-ko="특보">特報</span>
                        </div>
                    </div>

                    <div id="hourly" class="forecast-content active">
                        <div class="hourly-forecast">
                            </div>
                    </div>

                    <div id="daily" class="forecast-content">
                        <div class="daily-forecast">
                            </div>
                    </div>

                    <div id="warning" class="forecast-content">
                        </div>
                </div>

                <div id="disaster-section" class="section">
                    <h2 class="section-title">🚨 <span data-translate="disaster_title" data-ko="재해 정보">災害情報</span></h2>
                    
                    <div class="realtime-disaster-info" style="background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                        <h3 data-ko="🔴실시간 재해 정보">🔴リアルタイム災害情報</h3>
                        <div id="disaster-status" style="font-weight: bold; color: #666; margin-bottom: 10px;" data-ko="로드 중…">ロード中…</div>
                        <div id="last-update" style="font-size: 0.9em; color: #888; margin-bottom: 15px;" data-ko="마지막 업데이트: -">最終更新: -</div>
                        
                        <div class="earthquake-section" style="margin-bottom: 20px;">
                            <h4 data-ko="🌋지진 정보">🌋地震情報</h4>
                            <div id="earthquake-list" style="background: white; padding: 15px; border-radius: 5px; border-left: 4px solid #dc3545;">-</div>
                        </div>
                        
                        <div class="volcano-section">
                            <h4 data-ko="🗻화산 정보">🗻火山情報</h4>
                            <div id="volcano-list" style="background: white; padding: 15px; border-radius: 5px; border-left: 4px solid #fd7e14;">-</div>
                        </div>
                    </div>
                    
                    <div class="disaster-alert">
                        <div class="alert-level">⚠️ <span data-translate="alert_caution" data-ko="주의 단계">注意段階</span></div>
                        <h3 data-translate="current_alert_status" data-ko="현재 재해 상태">現在災害の状態</h3>
                        <p id="alert-desc" data-ko="알림을 가져오는 중…">お知らせを取得しています…</p>
                    </div>

                    <div class="disaster-list" id="disaster-list">
                        </div>
                </div>

                <div id="facility-section" class="section">
                    <h2 class="section-title">🏥 <span data-translate="facility_title" data-ko="시설 정보">施設情報</span></h2>
                    
                    <div class="facility-tabs">
                        <div class="facility-tab active" onclick="showFacility('shelter', this)">
                            <span data-translate="shelter" data-ko="대피소">避難所</span>
                        </div>
                        <div class="facility-tab" onclick="showFacility('hospital', this)">
                            <span data-translate="hospital" data-ko="병원">病院</span>
                        </div>
                    </div>

                    <div id="shelter" class="facility-content active">
                        <div class="facility-list">
                            </div>
                    </div>

                    <div id="hospital" class="facility-content">
                        <div class="facility-list">
                            </div>
                    </div>
                </div>

                <div id="history-section" class="section">
                    <h2 class="section-title">📊 <span data-translate="history_title" data-ko="재해 이력">災害履歴</span></h2>
                    
                    <div class="db-history-section" style="background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                        <h3 data-ko="📈 재해 이력">📈 災害履歴</h3>
                        <div id="db-history-status" style="font-weight: bold; color: #666; margin-bottom: 10px;" data-ko="로드 중">ロード中</div>
                        <div id="db-history-list" style="background: white; padding: 15px; border-radius: 5px;">
                            </div>
                    </div>
                    
                    <h3 data-ko="📋샘플 재해 정보">📋サンプル災害情報</h3>
                    <div class="history-list">
                        <div class="history-item">
						    <div class="history-header">
						        <div class="history-title">🌊 <span data-translate="flood_2024" data-ko="2024년 도쿄 호우로 인한 피해">2024年 東京豪雨による被害</span></div>
						        <div class="history-date">2024.07.15</div>
						    </div>
						    <div class="history-content" data-translate="flood_2024_desc" 
                                 data-ko="시간당 80mm의 집중호우로 인해 도쿄도 스기나미구 일대에서 침수 피해가 발생. 약 50명의 주민이 대피하고, 30대의 차량이 침수됨. 신속한 대피소 운영으로 인명 피해는 최소한으로 억제됨.">
						        時間当たり80ミリの集中豪雨により、東京都杉並区一帯で浸水被害が発生。  
						        約50名の住民が避難し、30台の車両が水没。  
						        迅速な避難所運営により人的被害は最小限に抑えられた。
						    </div>
						</div>
                    </div>
                </div>

                <div id="news-section" class="section">
                    <h2 class="section-title">📰 <span data-translate="news_title" data-ko="관련 뉴스">関連ニュース</span></h2>
                    
                    <div class="news-list">
                        </div>
                </div>
            </main>
        </div>
    </div>
</div>

<th:block layout:fragment="script">
    <script th:inline="javascript">
        window.USER_LOCATION = {
            address: /*[[${userAddress}]]*/ '東京',
            latitude: /*[[${userLatitude}]]*/ 35.6895,
            longitude: /*[[${userLongitude}]]*/ 139.6917
        };
        console.log('사용자 위치 정보:', window.USER_LOCATION);
    </script>
    
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBdiJWNOl98gTR6XjCfDhubMwXQZVO3ejs&libraries=places&v=weekly" async defer></script>
    
    <script src="/js/detail/jma.js"></script>
</th:block>

</body>
</html>